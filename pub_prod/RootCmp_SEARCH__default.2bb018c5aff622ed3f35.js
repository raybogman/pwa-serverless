/*!
 * @version v10.0.0-52-gbc6bd9fde-dev
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{IYh2:function(e,t,a){(t=e.exports=a("JPst")(!1)).i(a("ysJs"),""),t.push([e.i,".searchPage-root-pgQ {\n    padding: 1rem;\n}\n\n.searchPage-categoryTop-2EO {\n    align-items: center;\n    color: rgb(var(--venia-global-color-text-alt));\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n}\n\n.searchPage-noResult-Zxz {\n    display: flex;\n}\n\n.searchPage-headerButtons-v21 {\n    display: flex;\n    flex-basis: 100%;\n    justify-content: center;\n    margin: 1rem 0;\n}\n\n.searchPage-heading-1kN {\n    line-height: var(--venia-global-typography-heading-lineHeight);\n    margin: 2.5rem 0 1rem;\n    max-width: 75vw;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.searchPage-headingHighlight-12s {\n    font-weight: var(--venia-global-fontWeight-bold);\n}\n\n.searchPage-filterButton-1D5 {\n    min-width: 6.25rem;\n}\n\n.searchPage-sortContainer-jkh {\n    font-size: 0.875rem;\n}\n\n.searchPage-sortText-3Ha {\n    font-weight: 600;\n}\n",""]),t.locals={root:"searchPage-root-pgQ",categoryTop:"searchPage-categoryTop-2EO",noResult:"searchPage-noResult-Zxz",headerButtons:"searchPage-headerButtons-v21",heading:"searchPage-heading-1kN",headingHighlight:"searchPage-headingHighlight-12s",filterButton:"searchPage-filterButton-1D5 "+a("ysJs").locals.root_lowPriority,sortContainer:"searchPage-sortContainer-jkh",sortText:"searchPage-sortText-3Ha"}},N6ZK:function(e,t,a){"use strict"
a.r(t),a.d(t,"default",function(){return A})
var n=a("J4zp"),r=a.n(n),c=a("q1tI"),s=a.n(c),o=a("dDsW"),l=a("kriW"),i=a("17x9"),u=a("lSNA"),g=a.n(u),h=a("RIqP"),p=a.n(h),m=a("VX74"),d=a("Ty5D"),f=a("y1Xp"),b=a("OlZo"),P=a("Cszt"),y=a("PKba"),j=a("IOPv"),O=a("Unmo"),v=a("+wQL"),_=a("VkAN"),E=a.n(_)
function _templateObject4(){var e=E()(['\n    query GetFilterInputsForSearch {\n        __type(name: "ProductAttributeFilterInput") {\n            inputFields {\n                name\n                type {\n                    name\n                }\n            }\n        }\n    }\n'])
return _templateObject4=function _templateObject4(){return e},e}function _templateObject3(){var e=E()(["\n    query ProductSearch(\n        $currentPage: Int = 1\n        $inputText: String!\n        $pageSize: Int = 6\n        $filters: ProductAttributeFilterInput!\n        $sort: ProductAttributeSortInput\n    ) {\n        products(\n            currentPage: $currentPage\n            pageSize: $pageSize\n            search: $inputText\n            filter: $filters\n            sort: $sort\n        ) {\n            items {\n                id\n                name\n                small_image {\n                    url\n                }\n                url_key\n                url_suffix\n                price {\n                    regularPrice {\n                        amount {\n                            value\n                            currency\n                        }\n                    }\n                }\n            }\n            page_info {\n                total_pages\n            }\n            total_count\n        }\n    }\n"])
return _templateObject3=function _templateObject3(){return e},e}function _templateObject2(){var e=E()(["\n    query getProductFiltersBySearch($search: String!) {\n        products(search: $search) {\n            aggregations {\n                label\n                count\n                attribute_code\n                options {\n                    label\n                    value\n                }\n            }\n        }\n    }\n"])
return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=E()(["\n    query getPageSize {\n        storeConfig {\n            id\n            grid_per_page\n        }\n    }\n"])
return _templateObject=function _templateObject(){return e},e}var S=Object(m.gql)(_templateObject()),w=Object(m.gql)(_templateObject2()),x=Object(m.gql)(_templateObject3()),T={getFilterInputsQuery:Object(m.gql)(_templateObject4()),getPageSize:S,getProductFiltersBySearchQuery:w,productSearchQuery:x},N=a("C0us"),C=a("vh/y"),z=a("DUu4"),F=a("tuiD"),I=a("ACyH"),k=a("LboF"),Q=a.n(k),R=a("IYh2"),B=a.n(R),D={injectType:"singletonStyleTag",insert:"head",singleton:!0},M=(Q()(B.a,D),B.a.locals||{}),$=s.a.lazy(function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"dzHx"))}),q=function SearchPage(e){var t,a=Object(f.a)(M,e.classes),n=function useSearchPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.a)(T,e.operations),a=t.getFilterInputsQuery,n=t.getPageSize,s=t.getProductFiltersBySearchQuery,o=t.productSearchQuery,l=Object(m.useQuery)(n,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}).data,i=l&&l.storeConfig.grid_per_page,u=Object(O.a)(),h=r()(u,1)[0],_=h.sortAttribute,E=h.sortDirection,S=Object(c.useRef)(h),w=Object(d.h)(),x=w.search,N=Object(c.useRef)(x),C=Object(P.a)(),z=r()(C,2),F=z[0],I=z[1],k=F.currentPage,Q=F.totalPages,R=I.setCurrentPage,B=I.setTotalPages,D=Object(b.b)(),M=r()(D,2)[1],$=M.toggleDrawer,q=M.actions.setPageLoading,A=Object(j.a)("query",w),H=Object(c.useMemo)(function(){var e=Object(v.c)(x)
if(0===e.size)return null
var t=e.get("category_id")
return t?p()(t).map(function(e){return e.split(",")[0]}).join(", "):null},[x]),L=Object(c.useCallback)(function(){$("filter")},[$]),J=Object(m.useQuery)(a),U=J.called,Z=J.data,W=J.loading,K=Object(c.useMemo)(function(){var e=new Map
return Z&&Z.__type.inputFields.forEach(function(t){var a=t.name,n=t.type
e.set(a,n.name)}),e},[Z]),V={currentPage:k,setPage:R,totalPages:Q},X=Object(m.useLazyQuery)(o,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),Y=r()(X,2),G=Y[0],ee=Y[1],te=ee.called,ae=ee.loading,ne=ee.error,re=ee.data,ce=!!re&&ae
Object(c.useEffect)(function(){q(ce)},[ce,q]),Object(c.useEffect)(function(){if(K.size&&i){var e=Object(v.c)(x),t={}
e.forEach(function(e,a){t[a]=Object(v.b)(e,K.get(a))}),G({variables:{currentPage:Number(k),filters:t,inputText:A,pageSize:Number(i),sort:g()({},_,E)}})}},[k,K,A,G,i,x,E,_]),Object(c.useEffect)(function(){var e=re?re.products.page_info.total_pages:null
return B(e),function(){B(null)}},[re,B]),Object(c.useEffect)(function(){var e=new URLSearchParams(N.current),t=new URLSearchParams(x)
e.delete("page"),t.delete("page"),e.toString()===t.toString()&&S.current.sortAttribute.toString()===h.sortAttribute.toString()&&S.current.sortDirection.toString()===h.sortDirection.toString()||(R(1),N.current=x,S.current=h)},[h,x,R])
var se=Object(m.useLazyQuery)(s,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),oe=r()(se,2),le=oe[0],ie=oe[1].data
Object(c.useEffect)(function(){A&&le({variables:{search:A}})},[le,A,x])
var ue=ie?ie.products.aggregations:null,ge=U&&!te||ae||W
return Object(y.a)(k),{data:re,error:ne,filters:ue,loading:ge,openDrawer:L,pageControl:V,searchCategory:H,searchTerm:A,sortProps:u}}(),i=n.data,u=n.error,h=n.filters,_=n.loading,E=n.openDrawer,S=n.pageControl,w=n.searchCategory,x=n.searchTerm,k=n.sortProps,Q=Object(o.a)().formatMessage,R=r()(k,1)[0]
if(!i){if(_)return z.a
if(u)return s.a.createElement("div",{className:a.noResult},s.a.createElement(l.a,{id:"searchPage.noResult",defaultMessage:"No results found. The search term may be missing or invalid."}))}t=0===i.products.items.length?s.a.createElement("div",{className:a.noResult},s.a.createElement(l.a,{id:"searchPage.noResultImportant",defaultMessage:"No results found!"})):s.a.createElement(c.Fragment,null,s.a.createElement("section",{className:a.gallery},s.a.createElement(C.a,{items:i.products.items})),s.a.createElement("section",{className:a.pagination},s.a.createElement(N.a,{pageControl:S})))
var B=i.products.total_count||0,D=h&&h.length?s.a.createElement(I.a,{priority:"low",classes:{root_lowPriority:a.filterButton},onClick:E,type:"button"},s.a.createElement(l.a,{id:"searchPage.filterButton",defaultMessage:"Filter"})):null,q=h&&h.length?s.a.createElement($,{filters:h}):null,A=B?s.a.createElement(F.a,{sortProps:k}):null,H=B?s.a.createElement("span",{className:a.sortContainer},s.a.createElement(l.a,{id:"searchPage.sortContainer",defaultMessage:"Items sorted by "}),s.a.createElement("span",{className:a.sortText},s.a.createElement(l.a,{id:R.sortId,defaultMessage:R.sortText}))):null,L=x?s.a.createElement(l.a,{id:"searchPage.searchTerm",values:{highlight:function highlight(e){return s.a.createElement("span",{className:a.headingHighlight},e)},category:w,term:x},defaultMessage:"Showing results:"}):s.a.createElement(l.a,{id:"searchPage.searchTermEmpty",defaultMessage:"Showing all results:"})
return s.a.createElement("article",{className:a.root},s.a.createElement("div",{className:a.categoryTop},s.a.createElement("span",{className:a.totalPages},Q({id:"searchPage.totalPages",defaultMessage:"items"},{totalCount:B})),s.a.createElement("div",{className:a.headerButtons},D,A),H),s.a.createElement("div",{className:a.heading},L),t,s.a.createElement(c.Suspense,{fallback:null},q))},A=q
q.propTypes={classes:Object(i.shape)({noResult:i.string,root:i.string,totalPages:i.string})}}}])
